# A2A Streaming Implementation

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç—Ä–∏–º–∏–Ω–≥

–ü–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ A2A v0.3.0, —Å—Ç—Ä–∏–º–∏–Ω–≥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑:

1. **–ú–µ—Ç–æ–¥**: `message/stream` (–≤–º–µ—Å—Ç–æ `message/send`)
2. **–ü—Ä–æ—Ç–æ–∫–æ–ª**: Server-Sent Events (SSE) —Å `Content-Type: text/event-stream`
3. **–§–æ—Ä–º–∞—Ç**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ JSON-RPC 2.0 –æ—Ç–≤–µ—Ç—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

## –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –≤ —Å—Ç—Ä–∏–º–µ

### 1. Task (–Ω–∞—á–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç)
```json
{
  "jsonrpc": "2.0",
  "id": "request-id",
  "result": {
    "kind": "task",
    "id": "task-id",
    "contextId": "context-id",
    "status": { "state": "running" }
  }
}
```

### 2. Message (–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
```json
{
  "jsonrpc": "2.0",
  "id": "request-id",
  "result": {
    "kind": "message",
    "messageId": "msg-id",
    "role": "agent",
    "taskId": "task-id",
    "contextId": "context-id",
    "parts": [
      { "kind": "text", "text": "–ò—â—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é..." }
    ]
  }
}
```

### 3. TaskStatusUpdateEvent (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞)
```json
{
  "jsonrpc": "2.0",
  "id": "request-id",
  "result": {
    "kind": "status-update",
    "taskId": "task-id",
    "contextId": "context-id",
    "final": true,
    "status": {
      "state": "completed",
      "message": {
        "role": "agent",
        "parts": [{ "kind": "text", "text": "–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç" }]
      }
    }
  }
}
```

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ö–ª–∏–µ–Ω—Ç (A2AClient)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `message/stream` –º–µ—Ç–æ–¥
- –ß–∏—Ç–∞–µ—Ç SSE –ø–æ—Ç–æ–∫ —á–µ—Ä–µ–∑ `ReadableStream`
- –ü–∞—Ä—Å–∏—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ `kind`
- –í—ã–∑—ã–≤–∞–µ—Ç `onUpdate()` –∫–æ–ª–±—ç–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä
- Endpoint: `POST /api/proxy/stream`
- –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç SSE –æ—Ç –∞–≥–µ–Ω—Ç–∞ –∫ –±—Ä–∞—É–∑–µ—Ä—É
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏: `Content-Type: text/event-stream`

### UI (ChatWindow)
- –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `updateMessage()` –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –ó–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å (—Å–µ—Ä–≤–µ—Ä –Ω–∞ :3001, –∫–ª–∏–µ–Ω—Ç –Ω–∞ :3000)
npm run dev
```

## –û—Ç–ª–∞–¥–∫–∞

–í—Å–µ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
- üîµ –ó–∞–ø—Ä–æ—Å—ã
- üí¨ –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- üìä –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
- üìã Task —Å–æ–±—ã—Ç–∏—è
- üü¢ –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚ùå –û—à–∏–±–∫–∏